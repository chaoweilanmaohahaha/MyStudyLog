# 区块链的学习

这里面的是看了一些有关区块链的调查论文之后，记录一下里面提到的点以及一些需要再查找资料的点。当然主要总结的问题和安全漏洞有关，并且尽可能和**智能合约**有关。

---

首先这篇文章还是强调了区块链技术的用途的广泛，那么这边强调的是是区块链技术，像比特币和以太坊都只是使用它的一个应用场景。

文中也确实强调了，智能合约本身存在着很多漏洞，并且可以造成金融上的损失。

> 如果只是研究智能合约上的漏洞，那么参考论文 ：
>
> N. Atzei, M. Bartoletti, T. Cimoli, A survey of attacks on ethereum smart contracts (sok), in: International Conference on Principles of Security and Trust, 2017, pp. 164-186. 

## 关于区块链技术

### 共识机制

因为区块链技术本身是一个分布式平台，所以需要共识机制来实现分布式平台的信任机制。常见的共识机制包括：

* PoW
* PoS
* PBFT
* DPoS

常见的就是前两种，**PoW** 依靠算力，也就是平常听到的通过借一个谜题，在比特币中使用的就是 PoW。**PoS** 是一种是基于矿工们目前拥有的数字货币数量分配，一种根据你持有货币的量和时间进行利息分配的制度。

### 块传播和同步

块传播的目的是为了通知其他结点块信息的手段，具体有：

* 广播机制：块信息广播
* 发送首部机制：只有别的块需要该块信息发送信息。
* 自发发送机制：只要挖到矿就广播
* 中继网络机制：共享一个交易池

### 威胁与漏洞

* 51%漏洞：使用 PoW 更有可能出现，只要拥有 51% 的算力，几乎能够操纵区块链。

* 私钥安全问题：因为一般而言，用户的账户是公私钥对，如果私钥被窃取了就可以实施身份伪装。

* 犯罪活动：区块链技术的匿名性使得很容易被运用到犯罪活动中，比如勒索、地下市场、洗钱。

* 双花攻击：这是区块链中用的比较多的攻击手段，攻击者使用两个账户，然后借用控制主链的方式进行攻击。

* 隐私泄露：(这个我暂时没看懂，似乎意思是可能会泄露自己的私钥)

* 犯罪用的智能合约：(例子没看懂)本身的意思应该是这个智能合约本身就是存在风险的。

* **智能合约存在的漏洞**：这个要着重来看，作者也是归纳了很多，我应该在这里截个图下来慢慢研究：![block_chain](.\img\block_chain.png)

  > L. Luu, D.-H. Chu, H. Olickel, P. Saxena, A. Hobor, Making smart contracts smarter, in: The ACM SIGSAC Conference on Computer and Communications Security, 2016, pp. 254-269. 

* 智能合约优化问题：这个可能不是什么漏洞，但是确实也是智能合约本身的问题，其中包括：
  * 存在没有用的代码
  * 存在冗余的代码
  * 过复杂的循环
* 有关价格的操作：导致 DoS

作者给出了部分真实的攻击案例：

* 私有矿攻击
* DAO 攻击 (这个应该详细的看一下)
* BGP 攻击，属于网络层面的
* 日蚀攻击
* 存活攻击
* 平衡攻击

加强技术：

* SmartPool：协议层面的增强
* Quantitative Framework：协议层面上的增强
* **OYENTE：符号执行测试漏洞**
* Hawk：防止隐私泄露
* Town Crier：这个算功能上的增强



