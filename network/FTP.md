# FTP

FTP：File Transfer Protocal（文件传输协议）

这个协议可以说和telnet有点类似，它也需要操作远程的主机，但是它可以解决所有不同系统的不同点。

FTP在使用的时候需要有两条TCP连接，一条是控制连接，这个链接会一只保持，主要用于传输命令（tos中会标注最小延迟）；一条是数据连接，是用来传输数据的，它可以时而断开时而连上（tos中会标注最大吞吐）。

首先要指明的是在传输过程中有许多选项是要给出的，例如文件的类型，控制的形式，结构类型，传输模式。

通常一个ftp请求之后所传回的ftp响应是三个数字加上一行文本，数字是给应用程序看的，而文本是给人看的。在ftp上一般只会做三种事：

1. 客户端给服务器发文件；
2. 服务器给客户端发文件；
3. 服务器给客户端发送文件列表。

那么通常的传输文件的方法其实也很简单：

1. 客户端创建一个数据连接；
2. 客户端选择一个端口号作为被动连接的端口号；
3. 客户端将这个端口号通过控制连接传给服务端；
4. 服务端在20端口处进行传输。

#### 匿名ftp

这个技术的目的是为了可以让任何人登陆然后通过ftp来传输文件，大量免费信息的获取都是通过这个方法。一般而言，一些匿名FTP服务器需要客户端有一个合法的域名，服务器会在传输时记录主机的域名，因为唯一的标识是客户端IP，这样服务器通过DNS的指针查询获取客户的域名，如果获取不到则无法登陆到匿名服务器。