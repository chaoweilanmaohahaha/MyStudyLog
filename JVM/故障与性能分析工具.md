# 故障与性能分析工具

在JAVA自带的JDK文件夹下，除了java.exe和javac.exe之外，还有一些其他的很小的程序。这些程序很多就是测试性能以及故障的一些工具。比如：

#### jps：虚拟机进程状况工具

这个就可以认为是UNIX中的ps命令，就连使用时和运行结果都很类似。

jps [options] [hostid]

#### jstat：虚拟机统计信息监视工具

它的作用是显示本地的或者是远程的虚拟机进程中的类似于类装载、内存等数据。

jstat [option vmid [interval[s|ms] [count]]]

#### jinfo：Java配置信息工具

它的作用是实时查看调整以及配置虚拟机的各项参数。

jinfo [option] pid

#### jmap：Java内存映像工具

它会生成Java堆的一个快照，一般是dump或者heapdump文件。

jmap [option] vmid

#### jhat：虚拟机堆转储快照分析工具

这个命令通常会和jmap搭配起来使用，这个jhat生成了dump文件之后，可以在浏览器上查看。

#### jstack：Java堆栈跟踪工具

这个命令是用于生成虚拟机当前的线程快照，也就是javacore文件。这个所谓的线程快照是当前每一条线程正在执行的方法的堆栈集合。主要处理线程之间的错误。

jstack [option] vmid

#### HSDIS：JIT反汇编

在调试的时候，如果出现代码通过JIT编译器动态生成到代码缓存中时，就没有很简单的办法能够处理这种混合模式的调试，那么此时就需要使用类似HSDIS这样的反汇编程序，可以将动态生成的代码退回汇编代码输出。

---

### 一些JDK可视化工具推荐

有两个强大的可视化软件，分别叫JConsole和VisualVM，这两个工具实际上也是JDK的正式成员。

#### JConsole：Java监视与管理控制台

在jdk的bin下使用jconsole.exe程序，启动之后将自动搜索出本机运行的所有虚拟机进程。这个软件本身就可以可视化地监视一些虚拟机运行的主要参数、监控内存的使用情况、监控线程的情况

#### VisualVM：故障处理工具

这是迄今为止最强大的一款运行监视和故障处理工具。这个工具基于NetBeans平台开发，它从一开始就具备了插件扩展功能的特性。它除了上面JConsole那些功能以外，还包含了如下操作：可以生成、浏览堆转储快照、分析程序的性能、BTrace动态日志跟踪（使用了这个工具，可以通过HotSwap技术动态加入不存在的调试代码）。